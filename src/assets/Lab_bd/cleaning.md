# Клининговая компания


Написать sql запросы взяв за основу [ER диаграмму](../../demo/er_test2.md).


## Пояснение бизнес-логики:
- Клиент создает Заявку с выбранным типом услуги
- Заявке назначается Статус и Сотрудник
- После выполнения создается Выполнение заявки с затраченным временем
- В процессе выполнения используются Материалы
- После выполнения Клиент оставляет Отзыв о заявке


## Создание базы данных 
Ознакомиться с [материалом](https://github.com/goryachkinama/db-practice/blob/main/src/Lab0.md)

Написать запросы для создания
- Базы данных
- Все таблицы согласно ER-диаграмме
- Связи между таблицами через внешние ключи
- Индексы для улучшения производительности
- Представление для удобного просмотра заявок

Особенности реализации:
- Использовать IDENTITY(1,1) для автоинкремента первичных ключей
- Добавлены проверки (CHECK) для валидации данных
- Создать индексы на часто используемых полях
- Включить ограничения NOT NULL где это необходимо
- Добавить представление для удобства работы с данными
- Для создание первичного ключа и внешних ключей используйте [CONSTRAINT](https://github.com/goryachkinama/db-practice/blob/main/src/Lab0.md)



## Тестовые данные
Комплексные запросы для заполнения базы данных тестовыми данными, которые отражают реальные бизнес-процессы.

- Логически связаны между собой (клиенты создают заявки, сотрудники выполняют их и т.д.)
- Охватывают разные сценарии (разные статусы заявок, приоритеты, типы услуг)
- Включают реалистичные данные с адресами, телефонами, комментариями
- Содержат разнообразные отзывы с разными оценками
- Учитывают использование материалов в разных количествах
- При необходимости добавить представление [(view)](https://github.com/goryachkinama/db-practice/blob/main/src/Lab_view.md)

После выполнения скрипта вы получите полностью рабочую базу данных с тестовыми данными для демонстрации и тестирования функциональности системы учета клининговых услуг.


## Запросы

### 1. Запросы для анализа заявок и услуг
- Топ-5 самых популярных услуг
- Статистика заявок по статусам

### 2. Запросы для анализа сотрудников
- Эффективность сотрудников (количество выполненных заявок и среднее время)
- Текущая нагрузка на сотрудников (активные заявки)

### 3. Запросы для анализа клиентов
- Самые активные клиенты
- Клиенты с самыми высокими оценками

### 4. Запросы для финансового анализа
- Ежемесячная выручка (по выполненным заявкам)

### 5. Запросы для управления запасами
- Материалы с низким запасом (меньше 20 единиц)
- Самые используемые материалы

### 6. Запросы для оперативного управления
- Заявки, требующие внимания (высокий приоритет или просроченные)

### 7. Анализ качества услуг
- Средние оценки по типам услуг
- Детальный анализ отзывов с комментариями

### 8. Сводный отчет по эффективности бизнеса

### 9. Запрос для поиска повторяющихся клиентов

### 10. Анализ сезонности услуг
